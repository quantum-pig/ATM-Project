# ATM仿真系统

这是一个用C语言实现的ATM仿真系统，具有完整的银行ATM功能。

## 功能特性

### 基本功能
- ✅ 密码验证机制（加密存储）
- ✅ 吞锁卡机制（连续错误3次锁定）
- ✅ 存取款功能
- ✅ 账户查询功能
- ✅ 转账功能
- ✅ 密码修改功能
- ✅ 交易回单打印
- ✅ 历史记录查询

### 高级功能
- ✅ 余额预测分析（基于历史数据）
- ✅ 分级菜单界面
- ✅ 数据持久化存储
- ✅ 完整的错误处理

## 系统架构

### 文件结构
```
ATM-Project/
├── atm_system.h          # 头文件，包含所有结构体和函数声明
├── main.c                # 主程序入口
├── encryption.c          # 加密解密功能
├── file_operations.c     # 文件操作功能
├── account_management.c  # 账户管理功能
├── transaction.c         # 交易功能
├── ui.c                  # 用户界面
├── utils.c               # 工具函数
├── Makefile              # 编译配置
└── README.md             # 说明文档
```

### 数据结构
- `Account`: 账户信息结构体
- `Statement`: 流水记录结构体
- 支持最多100个账户和1000条流水记录

## 编译和运行

### 环境要求
- GCC编译器
- 支持C99标准

### 编译方法
```bash
# 编译程序
make

# 或者直接运行
make run

# 清理编译文件
make clean
```

### 手动编译
```bash
gcc -Wall -Wextra -std=c99 -g *.c -o atm_system
./atm_system
```

## 使用说明

### 系统初始化
程序首次运行时会自动创建25个测试账户，每个账户：
- 卡号：622202000001 到 622202000025
- 默认密码：123456
- 随机余额：1000-51000元

### 登录系统
1. 选择"登录系统"
2. 输入卡号（如：622202000001）
3. 输入6位密码（默认：123456）
4. 连续错误3次将锁定账户

### 主要功能
1. **存款**：输入金额，系统自动更新余额
2. **取款**：检查余额，不足时提示
3. **转账**：输入对方账户，验证后转账
4. **查询**：显示账户信息和交易历史
5. **修改密码**：输入新密码并确认
6. **余额预测**：基于历史数据分析未来余额

### 安全特性
- 密码采用简单加密存储
- 连续错误登录自动锁定
- 交易金额验证
- 账户存在性验证

## 技术特点

### 加密机制
使用简单的凯撒密码加密存储用户密码，密钥为13。

### 数据持久化
- 账户信息存储在 `accounts.dat`
- 流水记录存储在 `statements.dat`
- 程序重启后数据自动恢复

### 错误处理
- 输入验证
- 余额检查
- 账户锁定机制
- 友好的错误提示

## 扩展功能

### 余额预测算法
基于最近10笔交易的平均变化量，预测账户未来余额趋势。

### 可扩展性
- 模块化设计，易于添加新功能
- 清晰的函数接口
- 完整的数据结构定义

## 注意事项

1. 程序使用控制台界面，需要终端支持
2. 测试数据在首次运行时自动生成
3. 所有金额以元为单位，支持小数点后两位
4. 系统支持最多100个账户和1000条流水记录

## 开发者信息

本系统完全按照课程要求实现，包含：
- 详细的中文注释
- 规范的变量命名
- 清晰的程序结构
- 完整的功能实现

适合作为C语言课程设计或毕业设计项目。
